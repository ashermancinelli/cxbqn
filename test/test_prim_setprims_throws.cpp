/*
 * This file is generated, don't edit!
 * Generated by the CXBQN build system on 2021-11-29T16:52:56
 */
#include <cxbqn/comp_utils.hpp>
#include <cxbqn/cxbqn.hpp>
#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN
#include <doctest/doctest.h>

using namespace cxbqn;
using namespace cxbqn::types;
using namespace cxbqn::provides;

TEST_CASE("'a'+'c'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'a'+'c'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], CXBQN_NEW(Character, U'a'),
                            CXBQN_NEW(Character, U'c')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê-‚ãÑf+2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê-‚ãÑf+2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[1], CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 33, 0, 0, 48, 6, 0, 2, 0, 0, 34, 0, 0, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("97-'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "97-'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], CXBQN_NEW(Number, 97),
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("@-1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "@-1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Character, U'\0')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("-'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "-'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê√∑‚ãÑ-f") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê√∑‚ãÑ-f");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], runtime[3]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 33, 0, 0, 48, 6, 34, 0, 0, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2√ó'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2√ó'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[2], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("√∑'b'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "√∑'b'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[3], CXBQN_NEW(Character, U'b')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê‚àö-‚ãÑ√∑f") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê‚àö-‚ãÑ√∑f");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], runtime[3], runtime[5]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 0, 0, 2, 20, 33, 0, 0, 48, 6, 34, 0, 0, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ãÜ'œÄ'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ãÜ'œÄ'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[4], CXBQN_NEW(Character, U'œÄ')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("'e'‚ãÜ'œÄ'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'e'‚ãÜ'œÄ'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[4], CXBQN_NEW(Character, U'e'),
                            CXBQN_NEW(Character, U'œÄ')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê‚åà‚ãÑ‚åäf") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê‚åà‚ãÑ‚åäf");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[6], runtime[7]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 33, 0, 0, 48, 6, 34, 0, 0, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê+‚ãÑG‚Üê-‚ãÑf‚â§g") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê+‚ãÑG‚Üê-‚ãÑf‚â§g");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[1], runtime[16]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0,  0, 33, 0, 0, 48, 6, 0,  1, 33, 0,  1,
             48, 6, 34, 0, 1, 0,  2, 34, 0, 0,  17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 2}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("!0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "!0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[43], CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("\"error\"!\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "\"error\"!\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[43], CXBQN_NEW(Array, U"error"),
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àö'x'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àö'x'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[5], CXBQN_NEW(Character, U'x')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("'a'‚àß¬Ø1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'a'‚àß¬Ø1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[10], CXBQN_NEW(Number, -1),
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê-‚ãÑ2‚à®f") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê-‚ãÑ2‚à®f");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], runtime[11], CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 0, 33, 0, 0, 48, 6, 34, 0, 0, 0, 1, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("¬¨'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "¬¨'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[9], CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2¬¨'c'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2¬¨'c'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[9], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Character, U'c')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê{ùï©}‚ãÑ0¬¨f") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê{ùï©}‚ãÑ0¬¨f");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[9], CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}, {0, 0, 1}};
    auto cu = make_observer(new CompUnit{
        ._bc{1, 1, 33, 0, 0, 48, 6, 34, 0, 0, 0, 0, 0, 1, 17, 7, 34, 0, 1, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}, {16, 3}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("F‚Üê+-‚ãÑ|f") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "F‚Üê+-‚ãÑ|f");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[1], runtime[8]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 20, 33, 0, 0, 48, 6, 34, 0, 0, 0, 2, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 1}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("26|'A'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "26|'A'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[8], CXBQN_NEW(Number, 26),
                            CXBQN_NEW(Character, U'A')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äë\"\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äë\"\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[37], CXBQN_NEW(Array, U"")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äë2‚Äø0‚•ä‚ü®‚ü©") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äë2‚Äø0‚•ä‚ü®‚ü©");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22], runtime[37], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{11, 0, 0, 0, 0, 2, 0, 3, 11, 2, 17, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("+¬¥11") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "+¬¥11");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[50], CXBQN_NEW(Number, 11)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 1, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("-¬¥<'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "-¬¥<'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], runtime[12], runtime[50],
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 16, 0, 2, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("√ó¬¥3‚Äø1‚•ä\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "√ó¬¥3‚Äø1‚•ä\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[2],           runtime[22],
                            runtime[50],          CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 0, 3, 0, 4, 11, 2, 17, 0, 2, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚Äø3‚ä¢¬®4‚Äø5‚Äø6") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚Äø3‚ä¢¬®4‚Äø5‚Äø6");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[21],          runtime[47],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 5),
                            CXBQN_NEW(Number, 6)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 5, 0, 6, 11, 3, 0, 1, 0, 0, 26, 0, 2, 0, 3, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("\"abcd\"-\"a\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "\"abcd\"-\"a\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], CXBQN_NEW(Array, U"abcd"),
                            CXBQN_NEW(Array, U"a")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(‚Üï4)√ó(‚Üï3)‚ä¢‚åú‚Üï2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(‚Üï4)√ó(‚Üï3)‚ä¢‚åú‚Üï2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[2],           runtime[21],
                            runtime[28],          runtime[48],
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 6,  0,  2, 16, 0, 3, 0, 1, 26, 0,  5, 0,
             2, 16, 17, 0, 0,  0, 4, 0, 2, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("10‚äë‚Üï10") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "10‚äë‚Üï10");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[37], CXBQN_NEW(Number, 10)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("¬Ø11‚äë‚Üï10") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "¬Ø11‚äë‚Üï10");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[37], CXBQN_NEW(Number, -11),
                            CXBQN_NEW(Number, 10)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 16, 0, 1, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("0.5‚äë‚Üï10") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "0.5‚äë‚Üï10");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[37], CXBQN_NEW(Number, 0.5),
                            CXBQN_NEW(Number, 10)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 16, 0, 1, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("'x'‚äë‚Üï10") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'x'‚äë‚Üï10");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[37], CXBQN_NEW(Number, 10),
                            CXBQN_NEW(Character, U'x')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 0, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®‚ü©‚äë‚Üï10") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®‚ü©‚äë‚Üï10");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[37], CXBQN_NEW(Number, 10)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 11, 0, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚äë3+‚åú‚óã‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚äë3+‚åú‚óã‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0],           runtime[28],
                            runtime[37],          runtime[48],
                            runtime[54],          CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 7, 0, 1, 0, 4, 0, 3, 0, 0, 26, 27, 0, 6, 17, 0, 2, 0, 5, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("21‚Äø12‚Äø03‚â°‚ü®2‚Äø¬Ø3‚Äø0,1‚Äø2,0‚Äø¬Ø1‚ü©‚äë(10√ó‚Üï3)+‚åú‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "21‚Äø12‚Äø03‚â°‚ü®2‚Äø¬Ø3‚Äø0,1‚Äø2,0‚Äø¬Ø1‚ü©‚äë(10√ó‚Üï3)+‚åú‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0],
                            runtime[2],
                            runtime[18],
                            runtime[28],
                            runtime[37],
                            runtime[48],
                            CXBQN_NEW(Number, 21),
                            CXBQN_NEW(Number, 12),
                            CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, -3),
                            CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, -1),
                            CXBQN_NEW(Number, 10),
                            CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0,  15, 0,  3,  16, 0,  5, 0, 0,  26, 0,  8,  0, 3,  16,
             0,  1,  0,  14, 17, 17, 0, 4, 0,  9,  0,  10, 0, 11, 11,
             3,  0,  12, 0,  9,  11, 2, 0, 11, 0,  13, 11, 2, 11, 3,
             17, 0,  2,  0,  6,  0,  7, 0, 8,  11, 3,  17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®2,‚ü®3‚ü©‚ü©‚äë‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®2,‚ü®3‚ü©‚ü©‚äë‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[37], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 16, 0, 1, 0, 2, 0, 3, 11, 1, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(<2)‚äë‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(<2)‚äë‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[28], runtime[37],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 16, 0, 2, 0, 3, 0, 0, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(‚âç‚âç2)‚äë‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(‚âç‚âç2)‚äë‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[28], runtime[37],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 16, 0, 2, 0, 3, 0, 0, 16, 0, 0, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï@") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï@");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Character, U'\0')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï2.4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï2.4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Number, 2.4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï<6") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï<6");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[28], CXBQN_NEW(Number, 6)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï‚âç2‚Äø3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï‚âç2‚Äø3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[28], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 3, 11, 2, 0, 0, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï¬Ø1‚Äø2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï¬Ø1‚Äø2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Number, -1),
                            CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 2, 11, 2, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("-Àô‚ó∂√∑‚Äø√ó 4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "-Àô‚ó∂√∑‚Äø√ó 4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1],  runtime[2],  runtime[3],
                            runtime[44], runtime[59], CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 2, 0, 1, 11, 2, 0, 4, 0, 3, 0, 0, 26, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("¬Ø3‚•ä3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "¬Ø3‚•ä3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22], CXBQN_NEW(Number, -3),
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1.6‚Äø2.5‚•ä‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1.6‚Äø2.5‚•ä‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22], runtime[28], CXBQN_NEW(Number, 1.6),
                            CXBQN_NEW(Number, 2.5), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 16, 0, 0, 0, 2, 0, 3, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(‚âç2‚Äø3)‚•ä‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(‚âç2‚Äø3)‚•ä‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22], runtime[24], runtime[28],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 2, 16, 0, 0, 0, 3, 0, 4, 11, 2, 0, 1, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("\"     \"‚â°5‚•ä\"\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "\"     \"‚â°5‚•ä\"\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[18], runtime[22], CXBQN_NEW(Number, 5),
                            CXBQN_NEW(Array, U"     "), CXBQN_NEW(Array, U"")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 0, 2, 17, 0, 0, 0, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("4‚Äø‚àò‚•ä‚Üï15") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "4‚Äø‚àò‚•ä‚Üï15");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22], runtime[28], runtime[53],
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 15)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 16, 0, 0, 0, 3, 0, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE(">‚Üï¬®2‚Äø3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", ">‚Üï¬®2‚Äø3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[13], runtime[28], runtime[47],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 4, 11, 2, 0, 2, 0, 1, 26, 16, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE(">‚ü®‚•ä2,3‚ü©") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", ">‚ü®‚•ä2,3‚ü©");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[13], runtime[22], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 1, 16, 0, 3, 11, 2, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE(">(‚âç‚ãà‚ä¢)‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", ">(‚âç‚ãà‚ä¢)‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[13], runtime[21], runtime[24],
                            runtime[25], runtime[28], CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 4, 16, 0, 1, 0, 3, 0, 2, 21, 16, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1‚Äø0‚âç1‚Äø2‚Äø3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1‚Äø0‚âç1‚Äø2‚Äø3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 3, 0, 4, 11, 3, 0, 0, 0, 1, 0, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚âç‚üú‚âç‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚âç‚üú‚âç‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[28], runtime[56],
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 16, 0, 0, 0, 2, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚éâ1.1 ‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚éâ1.1 ‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[31], runtime[60],
                            CXBQN_NEW(Number, 1.1), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 16, 0, 3, 0, 2, 0, 1, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚éâ'x' ‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚éâ'x' ‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[31], runtime[60],
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Character, U'x')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 16, 0, 4, 0, 2, 0, 1, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚éâ(<<0) ‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚éâ(<<0) ‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12],          runtime[28],
                            runtime[31],          runtime[60],
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 16, 0, 4, 0, 0, 16, 0, 0, 16, 0, 3, 0, 2, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚éâ‚âç ‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚éâ‚âç ‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[28], runtime[31], runtime[60],
                            CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 16, 0, 0, 0, 3, 0, 2, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚öá2‚Äø2.5 ‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚öá2‚Äø2.5 ‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28],
                            runtime[31],
                            runtime[61],
                            CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 2.5),
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 0, 16, 0, 3, 0, 4, 11, 2, 0, 2, 0, 1, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2+‚çü1‚Äø'c'4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2+‚çü1‚Äø'c'4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0],           runtime[62],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Character, U'c')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 3, 0, 5, 11, 2, 0, 1, 0, 0, 27, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ãÜ‚çü1.5 2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ãÜ‚çü1.5 2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[4], runtime[62], CXBQN_NEW(Number, 1.5),
                            CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 2, 0, 1, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("+`4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "+`4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[52], CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 1, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("+`<'c'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "+`<'c'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[12], runtime[52],
                            CXBQN_NEW(Character, U'c')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 16, 0, 2, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("3‚Äø4+`4+‚åú‚óã‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "3‚Äø4+`4+‚åú‚óã‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{
        runtime[0],  runtime[28],          runtime[48],         runtime[52],
        runtime[54], CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0,  5, 0, 1, 0, 4,  0, 2, 0, 0, 26, 27, 0,  6,
             17, 0, 3, 0, 0, 26, 0, 5, 0, 6, 11, 2,  17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äè\"\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äè\"\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[36], CXBQN_NEW(Array, U"")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äè0‚Äø3‚•ä\"\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äè0‚Äø3‚•ä\"\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22], runtime[36], CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Array, U"")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 0, 2, 0, 3, 11, 2, 17, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("3‚äè\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "3‚äè\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[36], CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1.5‚äè\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1.5‚äè\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[36], CXBQN_NEW(Number, 1.5),
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("'x'‚äè\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'x'‚äè\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[36], CXBQN_NEW(Character, U'x'),
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®‚•ä0,1‚ü©‚äè‚âç\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®‚•ä0,1‚ü©‚äè‚âç\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[24],
                            runtime[36],          CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 16, 0, 2, 0, 3, 0, 0, 16, 0, 4, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("0‚Äø0<¬®‚ä∏‚äè\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "0‚Äø0<¬®‚ä∏‚äè\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12],          runtime[36],
                            runtime[47],          runtime[55],
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 0, 3, 0, 2, 0, 0, 26, 27, 0, 4, 0, 4, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®3‚Äø¬Ø‚àû,‚ü®‚ü©‚ü©‚äè4‚Äø3‚•ä0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®3‚Äø¬Ø‚àû,‚ü®‚ü©‚ü©‚äè4‚Äø3‚•ä0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[36],
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, -1.0 / 0.0),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 0, 0,  4, 0,  2, 11, 2, 17, 0, 1,
             0, 2, 0, 3, 11, 2, 11, 0, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(‚âç‚âç<5‚Äø1)‚äè‚Üï6‚Äø2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(‚âç‚âç<5‚Äø1)‚äè‚Üï6‚Äø2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12],          runtime[24],
                            runtime[28],          runtime[36],
                            CXBQN_NEW(Number, 5), CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 6), CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 6,  0, 7, 11, 2,  0, 2, 16, 0, 3, 0,  4,  0,
             5, 11, 2, 0, 0,  16, 0, 1, 16, 0, 1, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2.5‚Üë\"abce\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2.5‚Üë\"abce\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[26], CXBQN_NEW(Number, 2.5),
                            CXBQN_NEW(Array, U"abce")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚Äø'c'‚Üë\"abcd\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚Äø'c'‚Üë\"abcd\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[26], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Character, U'c'),
                            CXBQN_NEW(Array, U"abcd")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 0, 1, 0, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(‚âç2‚Äø3)‚Üë\"abcd\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(‚âç2‚Äø3)‚Üë\"abcd\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[26], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Array, U"abcd")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 0, 2, 0, 3, 11, 2, 0, 0, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("0.1‚Üì\"abcd\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "0.1‚Üì\"abcd\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[27], CXBQN_NEW(Number, 0.1),
                            CXBQN_NEW(Array, U"abcd")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®‚àò‚ü©‚Üì\"abcd\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®‚àò‚ü©‚Üì\"abcd\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[27], runtime[53],
                            CXBQN_NEW(Array, U"abcd")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 11, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("@‚Üï‚Üï5") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "@‚Üï‚Üï5");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Number, 5),
                            CXBQN_NEW(Character, U'\0')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 0, 0, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚Äø1‚Üï‚Üï5") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚Äø1‚Üï‚Üï5");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Number, 5)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 16, 0, 0, 0, 1, 0, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("¬Ø1‚Üï‚Üï5") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "¬Ø1‚Üï‚Üï5");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Number, -1),
                            CXBQN_NEW(Number, 5)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("7‚Üï‚Üï5") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "7‚Üï‚Üï5");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], CXBQN_NEW(Number, 7),
                            CXBQN_NEW(Number, 5)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("'a'¬´'b'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'a'¬´'b'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[29], CXBQN_NEW(Character, U'a'),
                            CXBQN_NEW(Character, U'b')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("\"a\"¬ª'b'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "\"a\"¬ª'b'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[30], CXBQN_NEW(Character, U'b'),
                            CXBQN_NEW(Array, U"a")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚âç‚ä∏¬ª\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚âç‚ä∏¬ª\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[30], runtime[55],
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 0, 2, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[31], CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ<‚àû") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ<‚àû");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[31],
                            CXBQN_NEW(Number, 1.0 / 0.0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚åΩ'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚åΩ'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[31], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 0, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1‚Äø2‚åΩ‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1‚Äø2‚åΩ‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[31], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 16, 0, 1, 0, 2, 0, 3, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚Äø2‚åΩ3+‚åú‚óã‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚Äø2‚åΩ3+‚åú‚óã‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0],           runtime[28],
                            runtime[31],          runtime[48],
                            runtime[54],          CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 7,  0, 1, 0, 4, 0, 3, 0,  0, 26, 27, 0,
             6, 17, 0, 2, 0, 2, 0, 5, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(<<3)‚åΩ‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(<<3)‚åΩ‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[28], runtime[31],
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 16, 0, 2, 0, 3, 0, 0, 16, 0, 0, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("/2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "/2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[33], CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("/1‚Äø¬Ø1‚Äø0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "/1‚Äø¬Ø1‚Äø0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[33], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, -1), CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 2, 0, 3, 11, 3, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("/=‚åúÀú‚Üï2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "/=‚åúÀú‚Üï2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[15], runtime[28], runtime[33],
                            runtime[45], runtime[48], CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 16, 0, 3, 0, 4, 0, 0, 26, 26, 16, 0, 2, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2/<2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2/<2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[33], CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("0‚Äø1/\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "0‚Äø1/\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[33], CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 0, 1, 0, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®‚Üï3,‚Üï3‚ü©/\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®‚Üï3,‚Üï3‚ü©/\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[33], CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 0, 2, 0, 0, 16, 0, 2, 0, 0, 16, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1‚Äø2/‚óã‚âç\"ab\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1‚Äø2/‚óã‚âç\"ab\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24],          runtime[33],
                            runtime[54],          CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Array, U"ab")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 0, 0, 2, 0, 1, 27, 0, 3, 0, 4, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("¬Ø1‚Äø2/\"ab\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "¬Ø1‚Äø2/\"ab\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[33], CXBQN_NEW(Number, -1),
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Array, U"ab")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 0, 1, 0, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àæ'c'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àæ'c'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[23], CXBQN_NEW(Character, U'c')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àæ\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àæ\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[23], CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àæ‚âç\"ab\"‚Äø\"cde\"‚Äø\"\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àæ‚âç\"ab\"‚Äø\"cde\"‚Äø\"\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[23], runtime[24], CXBQN_NEW(Array, U"ab"),
                            CXBQN_NEW(Array, U"cde"), CXBQN_NEW(Array, U"")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 3, 0, 4, 11, 3, 0, 1, 16, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àæ‚ü®2‚Äø3,1‚Äø3,2‚Äø2‚ü©‚•ä¬®0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àæ‚ü®2‚Äø3,1‚Äø3,2‚Äø2‚ü©‚•ä¬®0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[23],
                            runtime[47],          CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 6,  0, 2, 0, 0, 26, 0,  3, 0,  4, 11, 2, 0, 5,  0,
             4, 11, 2, 0, 3, 0, 3,  11, 2, 11, 3, 17, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("'a'‚àæ‚âç\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "'a'‚àæ‚âç\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[23], runtime[24],
                            CXBQN_NEW(Character, U'a'),
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 16, 0, 0, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("\"ab\"‚àæ‚óã‚âç\"cde\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "\"ab\"‚àæ‚óã‚âç\"cde\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[23], runtime[24], runtime[54],
                            CXBQN_NEW(Array, U"ab"), CXBQN_NEW(Array, U"cde")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 1, 0, 2, 0, 0, 27, 0, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(2‚Äø3‚•ä‚Üï6)‚àæ‚Üï2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(2‚Äø3‚•ä‚Üï6)‚àæ‚Üï2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[23],
                            runtime[28],          CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 6)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 2, 16, 0, 1,  0, 5,  0,  2, 16,
             0, 0, 0, 3, 0,  4, 11, 2, 17, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äî3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äî3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[42], CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äî<3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äî<3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[42], CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äî‚âç‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äî‚âç‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[28], runtime[42],
                            CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 16, 0, 0, 16, 0, 2, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äî1.5‚Äø0‚Äø2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äî1.5‚Äø0‚Äø2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[42], CXBQN_NEW(Number, 1.5),
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 2, 0, 3, 11, 3, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äî1‚Äø¬Ø2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äî1‚Äø¬Ø2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[42], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, -2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 2, 11, 2, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äîÀú'a'‚Äø1‚Äø0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äîÀú'a'‚Äø1‚Äø0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[42], runtime[45], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 2, 0, 3, 11, 3, 0, 1, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("4‚äî‚óã‚Üï2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "4‚äî‚óã‚Üï2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[42], runtime[54],
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 0, 2, 0, 1, 27, 0, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®1‚Äø2,3‚Äø1‚ü©‚äî2‚Äø3‚•ä0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®1‚Äø2,3‚Äø1‚ü©‚äî2‚Äø3‚•ä0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[42],
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0,  0, 0, 3, 0, 4, 11, 2, 17, 0, 1,  0, 2,
             0, 3, 11, 2, 0, 4, 0, 2, 11, 2, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®1‚Äø2,3‚Äø4‚Äø5,6‚Äø7‚ü©‚äî2‚Äø3‚•ä0") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®1‚Äø2,3‚Äø4‚Äø5,6‚Äø7‚ü©‚äî2‚Äø3‚•ä0");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[42],
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4),
                            CXBQN_NEW(Number, 5), CXBQN_NEW(Number, 6),
                            CXBQN_NEW(Number, 7), CXBQN_NEW(Number, 0)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 9, 0, 0, 0, 3, 0,  4, 11, 2, 17, 0, 1,  0, 2,  0, 3,  11, 2,
             0, 4, 0, 5, 0, 6, 11, 3, 0,  7, 0,  8, 11, 2, 11, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚âç‚ä∏‚äî‚âçÀò‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚âç‚ä∏‚äî‚âçÀò‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[28], runtime[42],
                            runtime[46], runtime[55], CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 16, 0, 3, 0, 0, 26, 16, 0, 2, 0, 4, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®‚ü®<3,2‚ü©,¬Ø1‚Äø0‚Äø¬Ø1‚ü©‚äî2‚Äø3‚Äø4‚•ä‚Üï24") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®‚ü®<3,2‚ü©,¬Ø1‚Äø0‚Äø¬Ø1‚ü©‚äî2‚Äø3‚Äø4‚•ä‚Üï24");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12],           runtime[22],
                            runtime[28],           runtime[42],
                            CXBQN_NEW(Number, 3),  CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, -1), CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 4),  CXBQN_NEW(Number, 24)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 9, 0,  2, 16, 0,  1, 0, 5, 0, 4, 0, 8, 11, 3, 17, 0, 3,  0, 4,
             0, 0, 16, 0, 5,  11, 2, 0, 6, 0, 7, 0, 6, 11, 3, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(2‚Äø3‚•ä‚Üï4)‚äî‚Üï2‚Äø2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(2‚Äø3‚•ä‚Üï4)‚äî‚Üï2‚Äø2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[28],
                            runtime[42],          CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3,  0, 3, 11, 2, 0, 1, 16, 0, 2,  0,  5, 0,
             1, 16, 0, 0, 0,  3, 0, 4, 11, 2, 17, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(3‚Äø3‚•ä‚Üï4)‚äî‚Üï2‚Äø2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(3‚Äø3‚•ä‚Üï4)‚äî‚Üï2‚Äø2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[28],
                            runtime[42],          CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5,  0, 5, 11, 2, 0, 1, 16, 0, 2,  0,  4, 0,
             1, 16, 0, 0, 0,  3, 0, 3, 11, 2, 17, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äêÀú'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äêÀú'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[38], runtime[45],
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 1, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äè‚ä∏‚äê\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äè‚ä∏‚äê\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[36], runtime[38], runtime[55],
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 0, 2, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(3‚Äø2‚Äø4‚•ä0)‚äê4‚•ä1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(3‚Äø2‚Äø4‚•ä0)‚äê4‚•ä1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[38],
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 1)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 6, 0, 0, 0, 4, 17, 0,  1, 0,  5,  0,
             0, 0, 2, 0, 3, 0, 4,  11, 3, 17, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚äê+Àô@") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚äê+Àô@");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[38], runtime[44],
                            CXBQN_NEW(Character, U'\0')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 2, 0, 0, 26, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(‚Üï5)‚àä1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(‚Üï5)‚àä1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[40], CXBQN_NEW(Number, 5),
                            CXBQN_NEW(Number, 1)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 0, 2, 0, 0, 16, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚àä‚âçÀò‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚àä‚âçÀò‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24],          runtime[28],
                            runtime[40],          runtime[46],
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 5, 0, 1, 16, 0, 3, 0, 0, 26, 16, 0, 2, 0, 4, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àä<4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àä<4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[12], runtime[40], CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ç∑'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ç∑'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[41], CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚âç‚ä∏‚ç∑\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚âç‚ä∏‚ç∑\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[41], runtime[55],
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 0, 2, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("0‚Äø¬Ø1‚Äø1‚çâ(3‚•ä1)‚•ä1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "0‚Äø¬Ø1‚Äø1‚çâ(3‚•ä1)‚•ä1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[32],
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Number, -1),
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 0, 4, 0, 0, 0,  5, 17, 17,
             0, 1, 0, 2, 0, 3, 0, 4, 11, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1‚Äø0‚âçÀò‚ä∏‚çâ\"ab\"‚âç\"cd\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1‚Äø0‚âçÀò‚ä∏‚çâ\"ab\"‚âç\"cd\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24],
                            runtime[32],
                            runtime[46],
                            runtime[55],
                            CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Array, U"ab"),
                            CXBQN_NEW(Array, U"cd")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 7, 0,  0,  0, 6, 17, 0, 1,  0, 3,  0, 2,
             0, 0, 26, 27, 0, 4, 0,  5, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("0‚Äø2‚çâ+‚åúÀú‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "0‚Äø2‚çâ+‚åúÀú‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0],           runtime[28],
                            runtime[32],          runtime[45],
                            runtime[48],          CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0,  7,  0, 1, 16, 0, 3, 0, 4,  0, 0,  26,
             26, 16, 0, 2, 0,  5, 0, 6, 11, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("2‚Äø0‚Äø0‚çâ‚Üï‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "2‚Äø0‚Äø0‚çâ‚Üï‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[32], CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 4, 0, 0, 16, 0, 0, 16, 0, 1, 0, 2, 0, 3, 0, 3, 11, 3, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("3‚çâ‚Üï‚Üï3") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "3‚çâ‚Üï‚Üï3");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[32], CXBQN_NEW(Number, 3)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 0, 16, 0, 0, 16, 0, 1, 0, 2, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚çã'a'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚çã'a'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[34], CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚çã'a'‚Äø‚àò") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚çã'a'‚Äø‚àò");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[34], runtime[53],
                            CXBQN_NEW(Character, U'a')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 1, 11, 2, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚çí2") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚çí2");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[35], CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àß‚äè‚ü®+‚ü©") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àß‚äè‚ü®+‚ü©");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[10], runtime[36]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 0, 11, 1, 0, 2, 16, 0, 1, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚àß+‚Äø-") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚àß+‚Äø-");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[1], runtime[10]};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 0, 0, 1, 11, 2, 0, 2, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚à®'c'") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚à®'c'");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[11], CXBQN_NEW(Character, U'c')};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 1, 0, 0, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚çãÀú6") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚çãÀú6");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[34], runtime[45], CXBQN_NEW(Number, 6)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 2, 0, 1, 0, 0, 26, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚çí‚üú‚Üï4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚çí‚üú‚Üï4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[28], runtime[35], runtime[56],
                            CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 0, 2, 0, 1, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(3‚Äø2‚Äø4‚•ä0)‚çã4‚•ä1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(3‚Äø2‚Äø4‚•ä0)‚çã4‚•ä1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[34],
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 1)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 6, 0, 0, 0, 4, 17, 0,  1, 0,  5,  0,
             0, 0, 2, 0, 3, 0, 4,  11, 3, 17, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("(3‚Äø2‚Äø4‚•ä0)‚çí1") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "(3‚Äø2‚Äø4‚•ä0)‚çí1");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[22],          runtime[35],
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 2),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Number, 0),
                            CXBQN_NEW(Number, 1)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 6, 0, 1, 0, 5, 0, 0, 0, 2, 0, 3, 0, 4, 11, 3, 17, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®+‚ü©‚çã‚Üï6") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®+‚ü©‚çã‚Üï6");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[0], runtime[28], runtime[34],
                            CXBQN_NEW(Number, 6)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 16, 0, 2, 0, 0, 11, 1, 17, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚ü®1‚Äø3‚Äø1,1‚Äø3‚Äø2‚ü©‚çí‚ü®1‚Äø3‚Äø{ùï©}‚ü©") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚ü®1‚Äø3‚Äø1,1‚Äø3‚Äø2‚ü©‚çí‚ü®1‚Äø3‚Äø{ùï©}‚ü©");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[35], CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 3), CXBQN_NEW(Number, 2)};
    std::vector<BlockDef> bds{{0, 1, 0}, {0, 0, 1}};
    auto cu = make_observer(new CompUnit{
        ._bc{0,  1, 0, 2, 1, 1, 11, 3, 11, 1, 0,  0, 0,  1, 0,  2, 0, 1,
             11, 3, 0, 1, 0, 2, 0,  3, 11, 3, 11, 2, 17, 7, 34, 0, 1, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}, {32, 3}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚çâ‚åæ‚âç \"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚çâ‚åæ‚âç \"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[24], runtime[32], runtime[57],
                            CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 0, 0, 2, 0, 1, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("-‚åæ‚äè 4") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "-‚åæ‚äè 4");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[1], runtime[36], runtime[57],
                            CXBQN_NEW(Number, 4)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 3, 0, 1, 0, 2, 0, 0, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï‚àò‚â†‚ä∏+‚åæ(10‚ä∏‚•ä)‚Üï6") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï‚àò‚â†‚ä∏+‚åæ(10‚ä∏‚•ä)‚Üï6");
  auto cu = [=] {
    std::vector<O<Value>> c{
        runtime[0],  runtime[14],           runtime[22],
        runtime[28], runtime[53],           runtime[55],
        runtime[57], CXBQN_NEW(Number, 10), CXBQN_NEW(Number, 6)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 8, 0, 3, 16, 0, 2, 0, 5, 0,  7,  27, 0,  6, 0,
             0, 0, 5, 0, 1,  0, 4, 0, 3, 27, 27, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚Üï‚àò‚â†‚ä∏+‚åæ(2‚ä∏/)‚Üï5") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚Üï‚àò‚â†‚ä∏+‚åæ(2‚ä∏/)‚Üï5");
  auto cu = [=] {
    std::vector<O<Value>> c{
        runtime[0],  runtime[14],          runtime[28],
        runtime[33], runtime[53],          runtime[55],
        runtime[57], CXBQN_NEW(Number, 2), CXBQN_NEW(Number, 5)};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 8, 0, 2, 16, 0, 3, 0, 5, 0,  7,  27, 0,  6, 0,
             0, 0, 5, 0, 1,  0, 4, 0, 2, 27, 27, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("1‚ä∏‚åΩ‚åæ(1‚Äø3‚Äø3‚Äø0‚ä∏‚äè)\"abcd\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "1‚ä∏‚åΩ‚åæ(1‚Äø3‚Äø3‚Äø0‚ä∏‚äè)\"abcd\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[31],          runtime[36],
                            runtime[55],          runtime[57],
                            CXBQN_NEW(Number, 1), CXBQN_NEW(Number, 3),
                            CXBQN_NEW(Number, 0), CXBQN_NEW(Array, U"abcd")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 7,  0, 1, 0, 2, 0, 4, 0, 5, 0,  5,  0,  6, 11,
             4, 27, 0, 3, 0, 0, 0, 2, 0, 4, 27, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}

TEST_CASE("‚åΩ‚åæ(1‚Üì4‚Üë‚ä¢)\"abc\"") {
  const auto rt = provides::get_runtime_setprims_cached();
  const auto runtime = rt->values;
  spdlog::critical("test='{}'", "‚åΩ‚åæ(1‚Üì4‚Üë‚ä¢)\"abc\"");
  auto cu = [=] {
    std::vector<O<Value>> c{runtime[21],          runtime[26],
                            runtime[27],          runtime[31],
                            runtime[57],          CXBQN_NEW(Number, 1),
                            CXBQN_NEW(Number, 4), CXBQN_NEW(Array, U"abc")};
    std::vector<BlockDef> bds{{0, 1, 0}};
    auto cu = make_observer(new CompUnit{
        ._bc{0, 7, 0, 0, 0, 1, 0, 6, 21, 0, 2, 0, 5, 21, 0, 4, 0, 3, 27, 16, 7},
        ._consts{CXBQN_NEW(Array, c.size())},
        ._blocks{},
        ._bodies{{0, 0}},
    });
    for (auto &bd : bds)
      cu->_blocks.emplace_back(bd);
    cu->_consts->values = std::move(c);
    cu->_consts->shape.push_back(c.size());
    GC::register_ptr(cu.get());
    return cu;
  }();
  REQUIRE_THROWS(vm::run(cu));
}
